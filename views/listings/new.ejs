<% layout("layouts/boilerplate.ejs") -%>

<section class="page page-form">
  <div class="form-card">
    <h1>Create a new listing</h1>

    <form
      action="/listings"
      method="POST"
      novalidate
      class="form-vertical"
      enctype="multipart/form-data"
    >
      <!-- Title -->
      <div class="form-field">
        <label for="title">Title *</label>
        <input
          id="title"
          type="text"
          name="title"
          placeholder="Add a catchy title"
          required
        />
      </div>

      <!-- Description -->
      <div class="form-field">
        <label for="description">Description *</label>
        <textarea
          id="description"
          name="description"
          placeholder="Describe your place"
          required
        ></textarea>
      </div>

      <!-- Categories -->
      <!-- Allow user to select one or more categories for their listing -->
      <div class="form-field">
        <label>Select categories</label>
        <div class="category-container">
          <!-- Loop through each available category and create a checkbox for it -->
          <% categories.forEach(function(categoryName) { %>
          <label class="category-option">
            <input type="checkbox" name="categories" value="<%= categoryName %>" />
            <span><%= categoryName %></span>
          </label>
          <% }) %>
        </div>
      </div>

      <!-- Image -->
      <div class="form-field">
        <label for="image">Upload image *</label>
      
        <div class="file-upload-wrapper">
          <label for="image" class="custom-file-btn">Choose Image</label>
          <span class="file-name">No file chosen</span>
          <input id="image" type="file" name="listing[image]" required />
        </div>
      </div>
      

      <!-- Price, Location, Country -->
      <div class="form-row">
        <div class="form-field">
          <label for="price">Price *</label>
          <input
            id="price"
            type="number"
            name="price"
            min="500"
            placeholder="Minimum 500"
            required
          />
        </div>

        <div class="form-field">
          <label for="location">Location *</label>
          <input
            id="location"
            type="text"
            name="location"
            placeholder="Surat, Gujarat"
            required
          />
        </div>

        <div class="form-field">
          <label for="country">Country *</label>
          <input
            id="country"
            type="text"
            name="country"
            placeholder="India"
            required
          />
        </div>
      </div>

      <!-- Submit -->
      <div class="form-actions">
        <button type="submit" class="btn-primary">Create listing</button>
      </div>
    </form>
  </div>
</section>
